<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link href='./css/bootstrap.min.css' rel='stylesheet' type='text/css'>
    <link href='./css/style.css' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/ui-lightness/jquery-ui.min.css" type="text/css" media="all" />
    <script type="text/javascript" src="./js/jquery-1.10.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.min.js" type="text/javascript"></script>
    <script src="./js/mygene_autocomplete_jqueryui.js" type="text/javascript"></script>
    <script type="text/javascript" src="./js/underscore.js"></script>
    <script type="text/javascript" src="./js/backbone.js"></script>
    <script type="text/javascript" src="./js/backbone-relational.js"></script>
    <script type="text/javascript" src="./js/marionette.backbone.min.js"></script>
    <script type="text/javascript" src="./js/d3.v3.js" charset="utf-8">></script>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="span3">
          <h2>JSON</h2>
          <button id="traverse" class="btn btn-primary btn-large">Traverse Tree</button>
          <table class="table table-hover" id='json_structure'></table>
        </div>
        <div class="span9">
          <div id="PlayerTreeRegion"></div>
        </div>
      </div>
    </div>
  <script type="text/template" id="AddRootNode">
  	<div id="mygene_addnode">
  	  <input id="gene_query" style="width:250px" class="mygene_query_target">
  	</div>
<script>
(function($) {
  $('input.mygene_query_target').genequery_autocomplete({
    select: function(event, ui) {
		var newNode = new Node({
			'name' : ui.item.name,
			"options" : {
				id: ui.item.id
			},
		});
		newNode.set("cid", newNode.cid);
		newNode.set("created_by","player");
		Cure.PlayerNodeCollection.add(newNode);
		Cure.PlayerNodeCollection.sync();
	}
});
  } (jQuery));
</script>
  </script>
    <script id="JSONtemplate" type="text/template">
      <td><span class="jsonview_name"><@= args.name @></span></td>
      <td><span><button class="btn btn-link showattr" >Edit</button></span></td>
      <td><span><button class="btn btn-link showjson" >JSON</button></span></td>
      <td><textarea class="jsonview_data"><@ print (args.jsondata); @></textarea></td>
  </script>
  <script id="Attrtemplate" type="text/template">
    <td colspan="3">
    <ul class="unstyled">
      <li>
            <span class="attredit">
              <label class="label label-info">Name</label><br /><label class="attrvalue"><@= args.name @></label>
              <input class="input-medium edit" id="name" type="text" value="<@= args.name @>" />
            </span>
      </li>
      <@ for(var option in args.options) {@>
        <li>
            <span class="attredit">
              <label class="label label-info"><@= option @></label><br /><label class="attrvalue"> <@= args.options[option] @></label>
              <input class="input-medium edit modeloption" id="<@= option @>" type="text" value="<@= args.options[option] @>" />
            </span>
        </li>
      <@ } @>
      <li><button class="btn btn-link editdone" >Done</button></li>
    </ul>
    </td>
  </script>
  <script id="nodeTemplate" type="text/template">  
    <span class="name attrvalue">
      <@= name @>
    </span>
    <input type="text" class="edit d3edit" value="<@- name @>">
    <button class="btn btn-small btn-link addchildren" type="button">
      <i class="icon-plus-sign"></i>
    </button>
    <button class="btn btn-small btn-link delete" href="#">
      <i class="icon-remove"></i>
    </button>
	<div class="addgeneinfo" id="addgeneinfo<@= options.id @>"></div>
  </script>
  <script type="text/javascript" src="./js/app.js" charset="utf-8">></script>
</body>
</html>
